**思路：**

根据两阶段提交来实现分布式事务

创建TranCoordinator结构，作为事务协调者（以下简称TC）。

数组中的每个元素相当于一个单独的节点，i,i+1,i+2,j 实现要么四个都执行，要么都不执行。

每个节点维护锁的表单，记录当前元素的锁是否已经被持有。



**步骤：**

1.worker开始向TC申请执行事务，参数传入四个访问的元素下标，这四个元素作为参与者。

2.TC需要确保所有参与者都能完成自己需要执行的部分，TC向参与者发送prepare信息。

3.i,i+1,i+2,j收到了prepare，查看自身状态，回复TC yes or no.

4.TC等待每个参与者的投票，如果都是yes，进入提交阶段。如果有一个no，执行abort.

5.参与者回复TC ACK信息，表示自己收到了commit或abort命令。